---
title: DDD  领域驱动设计
date: 2020-05-22 09:54:58
tags:
  - DDD
categories:
  - 架构 
  - 应用架构 
  - DDD  
---

<p></p>
<!-- more -->

## 目录
<!-- toc -->

# 目标
+ DDD的精髓是降低**系统复杂度**
+ 规则

# 三个核心
### 统一语言

+ 核心领域词汇表
+ 统一语言重构迭代： 模型-》实现-》 重构-》 隐喻 -》 再到模型
+ 命名规范
+ DSL - Domain Specific Language

###  领域划分 
+ 边界上下文（Bounded Context）
+ 上下文映射（Context Mapping)
共享内核（Shared Kernel） 
防腐层（Anti-Corruption）： 类似adaptor、facade， 对内部领域模型的隔离和屏蔽。

###  领域模型 
+ 抽象： 
  是从具体事物抽取、概括出它们共同的方面、本质属性与关系等。

+ 领域建模方法论：
  UML用例分析、 UML用例分析法
  四色建模法
  [事件风暴](https://www.eventstorming.com/)

# 模式 [3]
{% asset_img  'ddd.png' %}


- **实体** [4]   
  **可变性**是实体的特点
- **值对象**  [4] 
  **不变性**是值对象的本质
-  service
 领域服务是多个实体组合出来的一段业务逻辑

- 聚合[5]
  真实世界中整体与部分的关系
  正是因为有这样的关系，在操作整体的时候，整体就封装了对部分的操作。
  所谓的整体与部分的关系，就是当整体不存在时，部分就变得没有了意义。
  - 聚合根
   外部访问的唯一入口

# 落地
###  基于DDD应用架构的核心
分离业务复杂度和技术复杂度

### 设计思路 [4]
+ **贫血模型**
  - 实现
    **业务逻辑放到Service中**
+ **充血模型**
  -  实现
   **业务逻辑放到领域对象中(实体对象中有实现方法)**
  - 开闭原则
   保持了对象的封装性，使得领域模型在面临多态、继承等复杂结构时，易于变更
  - 适用场景
   类似继承、多态的情况
    在软件设计的过程中需要将一些类型或者编码进行转换
    更好地表现领域对象之间的关系
    “聚合”，也就是在真实世界中那些代表整体与部分的事
  
+ 比较
  - 贫血模型比充血模型更加**简单易行**
    - 贫血模型
      不需要  仓库、工厂、缓存，简单粗暴
  - 充血模型需要更强的**设计与协作能力**
    - 充血模型
      需要开发人员有更强的OOA/D能力、分析业务、业务建模与设计能力
      要有较强的团队协作能力
    - 贫血模型
      所有业务处理过程都交给Service完成
  - 贫血模型更容易应对**复杂的业务处理场景**
    
###  分层  [2]
+ 用户接口层(Controller层) 
+ Application层
+ Domain层
+ Infrastructure层

###  代码分层  [2]
  + Interface
    - assembler(DTO和领域对象的互转)
    - dto
    - facade（**粗粒度的调用接口**，将用户请求**委派**给一个或多个应用服务进行处理）

  + Application
    - event（pub， sub）（**事件处理相关的核心业务逻辑在领域层实现**）
    - service（应用服务）  
    
  + Domain
    - aggregate
      - entity
        - **聚合根** 
        - **实体**     
        - **值对象**   
        - **工厂模式（Factory）**
      - event （**事件实体**以及**与事件活动相关的业务逻辑代码**）
      - repository（所在聚合的查询或持久化领域对象的代码，通常包括仓储接口和仓储实现方法）
      - service（领域服务是多个实体组合出来的一段业务逻辑）


  + Infrastructure
    - config
    - Util（开发框架、消息、数据库、缓存、文件、总线、网关、第三方类库、通用算法等基础代码，）


# 框架
+ Axon Framework

# 参考
1. 《DDD（Domain Driven Design)的精髓》  直播+ppt  阿里张建飞  钉钉2020.05.21视频
2. 《13丨代码模型（上）：如何使用DDD设计微服务代码模型？》   欧创新
3. [领域驱动设计之领域模型](https://www.cnblogs.com/netfocus/archive/2011/10/10/2204949.html) *** 
4. 《04  领域模型是如何指导程序设计的？》 DDD 微服务落地实战-拉钩专栏
5. 《05  聚合、仓库与工厂：傻傻分不清楚》  DDD 微服务落地实战-拉钩专栏
6. {% post_link 'DomainLogicAndSQL' %}  self

### 资源
1. 《实现领域驱动设计》 B  *** 
2. 《领域专用语言实战》 B  没纸质
3. 《领域驱动设计精粹》B  没纸质 
4. 《中台架构与实现 : 基于DDD和微服务》 B  没纸质
5. [事件风暴和领域建模在阿里巴巴的落地实践](https://developer.aliyun.com/live/2874)  未
6. 《DDD实战课》 
7. 《mksz541-DDD（领域驱动设计）思想解读及优秀实践~4》 V  
8. 《lg2061-DDD 微服务落地实战-拉钩专栏》 V  ***   有代码



